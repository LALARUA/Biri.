<!doctype html>
<html xmlns:th="http://www.thymeleaf.org" class="no-js" lang="zxx">

<head>
    <meta charset="utf-8" >
    <link rel="shortcut icon" href="/assets/img/favicon.ico" type="image/x-icon">
    <link rel="apple-touch-icon" href="/assets/img/icon.png">
    <meta http-equiv="X-UA-Compatible" content="IE=edge" >

    <title>Airi - 管理标签</title>

    <meta content='width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no' name='viewport' >
    <meta name="viewport" content="width=device-width" >

    <!-- Bootstrap core CSS     -->
    <link href="/adminAssets/css/bootstrap.min.css" rel="stylesheet" >

    <!--  Paper Dashboard CSS    -->
    <link href="/adminAssets/css/amaze.css" rel="stylesheet" >

    <!--  CSS for Demo Purpose, don't include it in your project     -->
    <link href="/adminAssets/css/demo.css" rel="stylesheet" >

    <!--     Fonts and icons     -->
    <link href="/adminAssets/css/font-awesome.min.css" rel="stylesheet">
    <link href="/adminAssets/css/font-muli.css" rel='stylesheet' type='text/css'>
    <link href="/adminAssets/css/themify-icons.css" rel="stylesheet">

    <link href="/adminAssets/vendors/sweetalert/css/sweetalert2.min.css" rel="Stylesheet" >
    <link rel="stylesheet" href="/assets/css/plugins.css">
</head>

<body>
    <div class="wrapper">
        <div th:replace="~{admin/adminCommonbar::sidebar(activeUrl='manageTag',level=2)}"></div>
        <div class="main-panel">
            <nav class="navbar navbar-default">
                <div class="container-fluid">
                    <div class="navbar-minimize">
                        <button id="minimizeSidebar" class="btn btn-round btn-white btn-fill btn-just-icon">
							<i class="ti-arrow-left"></i>
                        </button>
                    </div>
                    <div class="navbar-header">
                        <button type="button" class="navbar-toggle" data-toggle="collapse">
                            <span class="sr-only">Toggle navigation</span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                            <span class="icon-bar"></span>
                        </button>
                        <a class="navbar-brand" href="#"> Form </a>
                    </div>
                    <div class="collapse navbar-collapse">
                        <ul class="nav navbar-nav navbar-right">
                            <li class="dropdown">
                                <a href="#" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="ti-bell"></i>
                                    <span class="notification">6</span>
                                    <p class="hidden-lg hidden-md">
                                        Notifications
                                        <b class="caret"></b>
                                    </p>
                                </a>
                                <ul class="dropdown-menu">
                                    <li>
                                        <a href="#">You have 5 new messages</a>
                                    </li>
                                    <li>
                                        <a href="#">You're now friend with Mike</a>
                                    </li>
                                    <li>
                                        <a href="#">Wish Mary on her birthday!</a>
                                    </li>                                    <li>
                                        <a href="#">5 warnings in Server Console</a>
                                    </li>
                                    <li>
                                        <a href="#">Jane completed 'Induction Training'</a>
                                    </li>
                                    <li>
                                        <a href="#">'Prepare Marketing Report' is overdue</a>
                                    </li>
                                </ul>
                            </li>
							<li>
                                <a href="#pablo" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="ti-layout-grid3-alt"></i>
                                    <p class="hidden-lg hidden-md">Apps</p>
                                </a>
                            </li>
                            <li>
                                <a href="#pablo" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="ti-user"></i>
                                    <p class="hidden-lg hidden-md">Profile</p>
                                </a>
                            </li>
							<li>
                                <a href="#pablo" class="dropdown-toggle" data-toggle="dropdown">
                                    <i class="ti-settings"></i>
                                    <p class="hidden-lg hidden-md">Settings</p>
                                </a>
                            </li>
                            <li class="separator hidden-lg hidden-md"></li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="content">
                <div class="container-fluid">
                    <div class="row">
	                    <div class="col-md-6">
	                        <div class="card">
							    <form method="#" action="#">
		                            <div class="header">
									    <h4 class="title">
											添加标签
										</h4>
									</div>
		                            <div style="height: 300px" class="content">
                                        <fieldset id="addTag">
                                            <div style="height: 35px" level="1" class="form-group">
                                                <label class="col-sm-2 control-label">
                                                    1级标签
                                                </label>
                                                <div style="float: left;margin-left: 10px"  >
                                                    <select  name="tagIdAndName" class="nice-select">
                                                        <option value="" selected>选择标签…</option>
                                                        <option th:each="tag:${tagHead.sonTags}" th:value="${tag.id}+'-'+${tag.name}" th:text="${tag.name}"></option>
                                                    </select>
                                                </div>
                                            </div>
                                            <button type="button" id="addTagLink" style="margin-left: 5px" class="btn btn-primary">添加标签链</button>

                                        </fieldset>


		                            </div>
							    </form>
	                        </div> <!-- end card -->
	                    </div> <!--  end col-md-6  -->
	                    <div class="col-md-6">
	                        <div class="card">
								<form class="form-horizontal">
		                            <div class="header">
										<h4 class="title">
											删除标签
										</h4>
									</div>
		                            <div class="content">
										<div class="form-group">
		                                    <label class="col-md-3 control-label">Email</label>
		                                    <div class="col-md-9">
		                                        <input type="email" placeholder="Email" class="form-control">
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                    <label class="col-md-3 control-label">Password</label>
		                                    <div class="col-md-9">
		                                        <input type="password" placeholder="Password" class="form-control">
		                                    </div>
		                                </div>
		                                <div class="form-group">
		                                    <label class="col-md-3"></label>
		                                    <div class="col-md-9">
		                                        <label class="checkbox">
		                                            <input type="checkbox" data-toggle="checkbox" value="">
		                                            Remember Me
		                                        </label>
		                                    </div>
		                                </div>
									</div>
									<div class="card-footer">
										<div class="form-group">
											<label class="col-md-3"></label>
											<div class="col-md-9">
												<button type="submit" class="btn btn-fill btn-default">
													Sign in
												</button>
											</div>
										</div>
									</div>
								</form>
	                    	</div> <!-- end card -->
	                	</div> <!--  end col-md-6  -->
					</div>
                    <div class="row">
                        <div class="col-md-6">
                            <div class="card">
                                <form id="RegisterValidation" action="" method="">
                                    <div class="content">
                                        <h4 class="title">Register Forms</h4>
                                        <div class="form-group label-floating">
                                            <label class="control-label">
                                                Email Address
                                                <small>*</small>
                                            </label>
                                            <input class="form-control" name="email" type="email" required="true" />
                                        </div>
                                        <div class="form-group label-floating">
                                            <label class="control-label">
                                                Password
                                                <small>*</small>
                                            </label>
                                            <input class="form-control" name="password" id="registerPassword" type="password" required="true" />
                                        </div>
                                        <div class="form-group label-floating">
                                            <label class="control-label">
                                                Confirm Password
                                                <small>*</small>
                                            </label>
                                            <input class="form-control" name="password_confirmation" id="registerPasswordConfirmation" type="password" required="true" equalTo="#registerPassword" />
                                        </div>
                                        <div class="category form-category">
                                            <small>*</small> Required fields</div>
                                        <div class="form-footer text-right">
											<div class="form-group">
												<label class="checkbox pull-left">
													<input type="checkbox" data-toggle="checkbox" value="" checked>
													Subscribe to newsletter
												</label>
											</div>
                                            <button type="submit" class="btn btn-rose btn-fill">Register</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                        <div class="col-md-6">
                            <div class="card">
                                <form id="LoginValidation" action="" method="">
                                    <div class="content">
                                        <h4 class="title">Login Form</h4>
                                        <div class="form-group label-floating">
                                            <label class="control-label">Email Address
                                                <star>*</star>
                                            </label>
                                            <input class="form-control" name="email" type="text" email="true" required="true" />
                                        </div>
                                        <div class="form-group label-floating">
                                            <label class="control-label">Password
                                                <star>*</star>
                                            </label>
                                            <input class="form-control" name="password" type="password" required="true" />
                                        </div>
                                        <div class="category form-category">
                                            <star>*</star> Required fields</div>
                                        <div class="text-center">
                                            <button type="submit" class="btn btn-rose btn-fill btn-wd">Register</button>
                                        </div>
                                    </div>
                                </form>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <footer class="footer">
                <div class="container-fluid">
                    <nav class="pull-left">
                        <ul>
                            <li>
                                <a href="#">
                                    Home
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Documentation
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Contact
                                </a>
                            </li>
                            <li>
                                <a href="#">
                                    Support
                                </a>
                            </li>
                        </ul>
                    </nav>
                    <p class="copyright pull-right">
                        &copy;
                        <script>
                            document.write(new Date().getFullYear())
                        </script>
                        <a href="http://www.bootstrapmb.com/">Amaze Admin</a>
                    </p>
                </div>
            </footer>
        </div>
    </div>
<!--   Core JS Files   -->
<script src="/adminAssets/vendors/jquery-3.1.1.min.js" type="text/javascript"></script>
<script src="/adminAssets/vendors/jquery-ui.min.js" type="text/javascript"></script>
<script src="/adminAssets/vendors/bootstrap.min.js" type="text/javascript"></script>
<script src="/adminAssets/vendors/material.min.js" type="text/javascript"></script>
<script src="/adminAssets/vendors/perfect-scrollbar.jquery.min.js" type="text/javascript"></script>
<!-- Forms Validations Plugin -->
<script src="/adminAssets/vendors/jquery.validate.min.js"></script>
<!--  Plugin for Date Time Picker and Full Calendar Plugin-->
<script src="/adminAssets/vendors/moment.min.js"></script>
<!--  Charts Plugin -->
<script src="/adminAssets/vendors/chartist.min.js"></script>
<!--  Plugin for the Wizard -->
<script src="/adminAssets/vendors/jquery.bootstrap-wizard.js"></script>
<!--  Notifications Plugin    -->
<script src="/adminAssets/vendors/bootstrap-notify.js"></script>
<!-- DateTimePicker Plugin -->
<script src="/adminAssets/vendors/bootstrap-datetimepicker.js"></script>
<!--  Checkbox, Radio, Switch and Tags Input Plugins -->
<script src="/adminAssets/js/bootstrap-checkbox-radio-switch-tags.js"></script>
<!-- Vector Map plugin -->
<script src="/adminAssets/vendors/jquery-jvectormap.js"></script>
<!-- Sliders Plugin -->
<script src="/adminAssets/vendors/nouislider.min.js"></script>
<!-- Select Plugin -->
<script src="/adminAssets/vendors/jquery.select-bootstrap.js"></script>
<!--  DataTables.net Plugin    -->
<script src="/adminAssets/vendors/jquery.datatables.js"></script>
<!-- Sweet Alert 2 plugin -->
<script src="/adminAssets/vendors/sweetalert/js/sweetalert2.min.js"></script>
<!--	Plugin for Fileupload, full documentation here: http://www.jasny.net/bootstrap/javascript/#fileinput -->
<script src="/adminAssets/vendors/jasny-bootstrap.min.js"></script>
<!--  Full Calendar Plugin    -->
<script src="/adminAssets/vendors/fullcalendar.min.js"></script>
<!-- TagsInput Plugin -->
<script src="/adminAssets/vendors/jquery.tagsinput.js"></script>
<!-- Material Dashboard javascript methods -->
<script src="/adminAssets/js/amaze.js"></script>
<!-- Material Dashboard DEMO methods, don't include it in your project! -->
<script src="/adminAssets/js/demo.js"></script>
    <script src="/assets/js/vendor/jquery.min.js"></script>

    <!-- Bootstrap and Popper Bundle JS -->
    <script src="/assets/js/bootstrap.bundle.min.js"></script>

    <!-- All Plugins Js -->
    <script src="/assets/js/plugins.js"></script>

    <!-- Ajax Mail Js -->
    <script src="/assets/js/ajax-mail.js"></script>

    <!-- Main JS -->
    <script src="/assets/js/main.js"></script>

    <!-- REVOLUTION JS FILES -->
    <script src="/assets/js/revoulation/jquery.themepunch.tools.min.js"></script>
    <script src="/assets/js/revoulation/jquery.themepunch.revolution.min.js"></script>

    <!-- SLIDER REVOLUTION 5.0 EXTENSIONS  (Load Extensions only on Local File Systems !  The following part can be removed on Server for On Demand Loading) -->
    <script src="/assets/js/revoulation/extensions/revolution.extension.actions.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.carousel.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.kenburn.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.layeranimation.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.migration.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.navigation.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.parallax.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.slideanims.min.js"></script>
    <script src="/assets/js/revoulation/extensions/revolution.extension.video.min.js"></script>

    <!-- REVOLUTION ACTIVE JS FILES -->
    <script src="/assets/js/revoulation.js"></script>

    <script th:inline="javascript">
        window.onload = function (ev) {
            var tagMap = [[${tagMap}]];
            var head = [[${tagHead}]];

            $(document).on('click', '.option', function (){
                var level = $(this).parent().parent().parent().parent().attr("level");
                var tags = $(this).parent().parent().parent().parent().parent().find(".tag");
                for (var i = 0;i<tags.length;i++){
                    if (tags.eq(i).attr("level")>level)
                        tags.eq(i).remove()
                }
                var tagId = $(this).attr("data-value").substring(0,$(this).attr("data-value").indexOf("-"));
                if (tagId==null||tagId=="")
                    return

                var tag = tagMap[tagId];
                var sonTags= tag.sonTags;

                if (sonTags.length>0){

                    var optionHTML = "";
                    var liHTML = "";
                    for (var i = 0;i<sonTags.length;i++){
                        optionHTML+="<option  value="+sonTags[i].id+"-"+sonTags[i].name+" >"+sonTags[i].name+"</option>"
                        liHTML+="<li data-value="+sonTags[i].id+"-"+sonTags[i].name+" class=\"option focus\">"+sonTags[i].name+"</li>"
                    }
                    level++;
                    $(this).parent().parent().parent().parent().after(" <div level="+level+ " style=\"height: 35px\" class=\"tag form-group\">\n" +
                        "                                                <label class=\"col-sm-2 control-label\">\n" +level+
                        "                                                    级标签\n" +
                        "                                                </label><div style=\"float: left;margin-left: 10px\"" +
                        " >\n" +
                        "               <select name=\"tagIdAndName\" class=\"nice-select\" style=\"display: none;\">\n" +
                        "               <option value=\"\" selected=\"\">选择标签…</option>\n" +
                        optionHTML+
                        "               </select>" +
                        "<div class=\"nice-select\" tabindex=\"0\">" +
                        "<span class=\"current\">选择标签</span><div class=\"nice-select-search-box\">" +
                        "<input type=\"text\" class=\"nice-select-search\" placeholder=\"Search...\"></div>" +
                        "<ul class=\"list\">" +
                        "<li data-value=\"\" class=\"option\">选择标签…</li>" +
                        liHTML+
                        "</ul></div>\n" +
                        "           </div></div>")
                }


            })
        }

    </script>
</body>
</html>
